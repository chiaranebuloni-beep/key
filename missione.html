<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FASCICOLO TOP SECRET — Missione Madrid</title>
<style>
  :root{
    --bg: #efede8;
    --card: #fff;
    --accent: #111;
    --tape1: linear-gradient(90deg,#f7df5a,#eecb3a);
  }
  body{
    font-family: "Courier New", monospace;
    background: var(--bg);
    color: var(--accent);
    margin: 0;
    padding: 28px;
  }
  .wrap{max-width:900px;margin:0 auto;}
  .card{
    background: var(--card);
    border:4px solid #000;
    padding:20px;
    box-shadow:8px 8px 0 rgba(0,0,0,0.08);
  }
  .tape{
    background: var(--tape1);
    padding:8px;
    text-align:center;
    font-weight:700;
    border:3px solid #000;
    display:block;
    margin-bottom:12px;
  }
  h1,h2,h3{margin:6px 0;text-transform:uppercase;letter-spacing:1px;}
  .indizio{border-left:4px solid #000;padding-left:12px;margin-top:12px;}
  img{max-width:100%;display:block;margin:12px 0;border:2px solid #ddd;}
  input[type="text"]{
    width:100%;
    padding:10px;
    border:2px dashed #333;
    background:#fbfbf8;
    font-family:"Courier New",monospace;
    margin-top:8px;
    box-sizing:border-box;
  }
  button{
    margin-top:12px;
    padding:10px 14px;
    border:2px solid #111;
    background:#fff;
    font-weight:700;
    cursor:pointer;
  }
  .error{color:#b00;margin-top:10px;}
  #pdfwrap{display:none;margin-top:18px;}
  iframe{width:100%;height:520px;border:1px solid #ccc;margin-top:10px;}
  footer{margin-top:18px;font-size:13px;color:#666}
  @media (max-width:520px){
    body{padding:14px}
    .card{padding:14px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <span class="tape">FASCICOLO TOP SECRET — MISSIONE MADRID</span>

      <h1>Indizi raccolti</h1>

      <div class="indizio" aria-labelledby="visivo">
        <h2 id="visivo">Indizio visivo</h2>
        <p>Fotogramma recuperato: l’insegna esterna è parzialmente visibile. Osserva i dettagli e l’angolo della ripresa.</p>
        <img src="insegna.jpg" alt="Foto parziale dell'insegna del locale (angolo ritagliato)">
      </div>

      <div class="indizio" aria-labelledby="descrizioni">
        <h2 id="descrizioni">Osservazioni</h2>
        <p>Facciata discreta, poco appariscente.</p>
        <p>Ingresso laterale consigliato.</p>
        <p>Tipologia: musica elettronica selezionata.</p>
        <p>Zona: vicina all’arteria pedonale affollata.</p>
      </div>

      <hr>

      <h2>Rapporto finale</h2>
      <p>Inserisci il <strong>nome corto</strong> del luogo che hai identificato. Se il luogo è corretto verrà sbloccato il fascicolo con i biglietti.</p>

      <label for="luogo" class="sr-only">Luogo identificato</label>
      <input id="luogo" type="text" placeholder="Scrivi qui il luogo" autocomplete="off" autocapitalize="characters" />
      <button id="send" type="button">Invia Rapporto</button>
      <div id="msgPost" class="error" role="status" aria-live="polite"></div>

      <div id="pdfwrap" aria-hidden="true">
        <h3>BIGLIETTI — DOCUMENTO UFFICIALE</h3>
        <p>Accesso autorizzato. Visualizza o scarica i biglietti qui sotto.</p>
        <iframe src="biglietti.pdf" title="Biglietti PDF"></iframe>
        <p><a href="biglietti.pdf" download>Scarica i biglietti (PDF)</a></p>
      </div>

      <footer>
        Nota: il campo è sensibile solo al contenuto della parola chiave; spazi e differenze di maiuscole non bloccano l'accesso.
      </footer>
    </div>
  </div>

<script>
  // Parola attesa (case-insensitive)
  const LUOGO = "FITZ";

  document.getElementById("send").addEventListener("click", () => {
    const val = document.getElementById("luogo").value.trim();
    const msg = document.getElementById("msgPost");
    if(!val){
      msg.textContent = "Scrivi il luogo prima di inviare.";
      return;
    }
    const cleaned = val.replace(/[^\w]/g, "").toLowerCase();
    if(cleaned === LUOGO.toLowerCase()){
      msg.textContent = "";
      document.getElementById("pdfwrap").style.display = "block";
      document.getElementById("pdfwrap").setAttribute("aria-hidden","false");
      document.getElementById("pdfwrap").scrollIntoView({behavior:"smooth"});
    } else {
      msg.textContent = "Rapporto non valido. Il luogo non corrisponde.";
    }
  });

  document.getElementById("luogo").addEventListener("keydown", (e) => {
    if(e.key === "Enter") document.getElementById("send").click();
  });
</script>
</body>
</html>
